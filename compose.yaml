# Comments are provided throughout this file to help you get started.
# If you need more help, visit the Docker compose reference guide at
# https://docs.docker.com/go/compose-spec-reference/

# Here the instructions define your application as a service called "server".
# This service is built from the Dockerfile in the current directory.
# You can add other services your application may depend on here, such as a
# database or a cache. For examples, see the Awesome Compose repository:
# https://github.com/docker/awesome-compose
services:
  cmp3103-chat:
    image: lcas.lincoln.ac.uk/lcas/pdfchat:latest
    build:
      context: .
    ports:
      - 8501
    volumes:
      - ./cmp3103-slides.pdf:/app/initial.pdf:ro
    env_file:
      - .env
    environment:
      - TITLE=Welcome to CMP3103 Chat Bot
      - DISCLAIMER=The responses in this chat bot are generated by a generative artificial intelligence large language model from the lecture slides of the CMP3103 module. Please note that the information provided may by completely incorrect. You cannot    
        rely upon the provided answers, and we accept no liability if you get incorrect answers or responses. You may use this chat bot to explore the content of the CMP3103 module, but you must not rely on it for any assessments. We do not assume any responsibility or liability for the use or interpretation of this content.
    command: streamlit run app-predefined.py
  # vistachat:
  #   image: lcas.lincoln.ac.uk/lcas/pdfchat:latest
  #   build:
  #     context: .
  #   ports:
  #     - 8501
  #   volumes:
  #     - ./vista-interviews.pdf:/app/initial.pdf:ro
  #   env_file:
  #     - .env
  #   environment:
  #     - TITLE=Welcome to VISTA Chat Bot
  #     - DISCLAIMER=The responses in this chat bot are generated by a generative artificial intelligence large language model from the transcripts the VISTA interviews. 
  #       Please note that the information provided may by completely incorrect. You cannot    
  #       rely upon the provided answers, and we accept no liability if you get incorrect answers or responses. 
  #   command: streamlit run app-predefined.py
  book:
    image: lcas.lincoln.ac.uk/lcas/pdfchat:latest
    build:
      context: .
    ports:
      - 8501
    volumes:
      - ./book.pdf:/app/initial.pdf:ro
    env_file:
      - .env
    environment:
      - TITLE=Welcome to the Book Chat Bot
      - DISCLAIMER=The responses in this chat bot are generated by a generative artificial intelligence large language model using the book Probabilistic Robotics as context.
        Please note that the information provided may by completely incorrect. You cannot    
        rely upon the provided answers, and we accept no liability if you get incorrect answers or responses. 
    command: streamlit run app-predefined.py
  pdfchat:
    image: lcas.lincoln.ac.uk/lcas/pdfchat:latest
    build:
      context: .
    ports:
      - 8501
    env_file:
      - .env
    command: streamlit run app-anypdf.py
  ngrok:
    image: lcas.lincoln.ac.uk/lcas/ngrok1:latest
    volumes:
      - ./ngrokrc:/app/.ngrok:ro
    build:
      context: .
      dockerfile: Dockerfile.ngrok
    links:
      - cmp3103-chat
      - pdfchat